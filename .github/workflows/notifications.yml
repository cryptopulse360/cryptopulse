name: Deployment Notifications

on:
  workflow_run:
    workflows: ["Build and Deploy to GitHub Pages"]
    types:
      - completed

jobs:
  notify:
    runs-on: ubuntu-latest
    if: github.event.workflow_run.conclusion != 'cancelled'
    
    steps:
      - name: Deployment Success Notification
        if: github.event.workflow_run.conclusion == 'success'
        run: |
          echo "🎉 Deployment Successful!"
          echo "✅ Website is now live"
          echo "🌐 Check your GitHub Pages URL"
          echo "📊 Performance metrics available in Lighthouse CI"
          
      - name: Deployment Failure Notification
        if: github.event.workflow_run.conclusion == 'failure'
        run: |
          echo "❌ Deployment Failed!"
          echo "🔍 Check the workflow logs for details"
          echo "🛠️ Common issues:"
          echo "   - Build errors"
          echo "   - Test failures"
          echo "   - Configuration problems"
          
      - name: Create deployment summary
        run: |
          echo "## Deployment Summary" >> $GITHUB_STEP_SUMMARY
          echo "- **Status**: ${{ github.event.workflow_run.conclusion }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Workflow**: ${{ github.event.workflow_run.name }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Branch**: ${{ github.event.workflow_run.head_branch }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Commit**: ${{ github.event.workflow_run.head_sha }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Timestamp**: $(date -u)" >> $GITHUB_STEP_SUMMARY